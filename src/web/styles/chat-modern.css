@import "_global.css";

/* ═══════════════════════════════════════════════════════════════════════════
   Modern Chat Overlay
   A sleek, glass-morphism inspired chat overlay with smooth animations
   ═══════════════════════════════════════════════════════════════════════════ */

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	padding: 0;
	background: #000;
	overflow: hidden;
}

/* ── Main Container ─────────────────────────────────────────────────────── */
.chat-container {
	display: flex;
	flex-direction: column-reverse;
	position: fixed;
	right: 24px;
	bottom: 24px;
	top: 80px;
	width: 420px;
	font-family: 'Inter', sans-serif;
	font-size: 15px;
	gap: 12px;
}

/* ── Message Card ───────────────────────────────────────────────────────── */
.message {
	position: relative;
	opacity: 0;
	transform: translateX(60px) scale(0.95);
	animation: slideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.message.hide {
	animation: slideOut 0.5s ease-in forwards;
}

.message-inner {
	display: flex;
	align-items: flex-start;
	gap: 12px;
	padding: 14px 16px;
	background: rgba(17, 14, 26, 0.85);
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	border: 1px solid rgba(255, 255, 255, 0.08);
	border-radius: 16px;
	position: relative;
	overflow: hidden;
	transition: all 0.3s ease;
}

/* Static accent line on left — light gray for normal messages */
.message-inner::before {
	content: '';
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 3px;
	border-radius: 3px 0 0 3px;
	background: var(--lightgray);
	opacity: 0.4;
}

/* ── Avatar ─────────────────────────────────────────────────────────────── */
/* Default avatar ring — silver like mod */
.avatar-ring {
	flex-shrink: 0;
	width: 42px;
	height: 42px;
	border-radius: 50%;
	padding: 2px;
	background: linear-gradient(135deg, var(--gray), var(--white));
	animation: ringPulse 3s ease-in-out infinite;
}

.avatar {
	width: 100%;
	height: 100%;
	border-radius: 50%;
	background-size: cover;
	background-position: center;
	background-color: var(--midblue);
	border: 2px solid var(--darkblue);
}

/* Counter-rotate avatar when ring spins */
.mod .avatar {
	animation: ringRotateReverse 6s linear infinite;
}

/* ── Content ────────────────────────────────────────────────────────────── */
.content {
	flex: 1;
	min-width: 0;
	display: flex;
	flex-direction: column;
	gap: 6px;
}

.meta {
	display: flex;
	align-items: center;
	gap: 8px;
}

.username {
	font-weight: 600;
	font-size: 14px;
	background: none;
	-webkit-text-fill-color: #d0d0d0;
}

.role-badge {
	font-family: 'JetBrains Mono', monospace;
	font-size: 9px;
	font-weight: 500;
	letter-spacing: 0.5px;
	padding: 2px 6px;
	border-radius: 4px;
	background: rgba(255, 255, 255, 0.1);
	color: var(--lightgray);
	border: 1px solid rgba(255, 255, 255, 0.15);
}

.vip-badge {
	background: linear-gradient(90deg, #c9a84c, #f5e6a3, #c9a84c);
	background-size: 200% 100%;
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	border-color: #c9a84c;
	animation: shimmer 6s linear infinite;
}

.sub-badge {
	background: rgba(167, 139, 250, 0.2);
	border-color: #a78bfa;
	color: #a78bfa;
}

.text {
	color: rgba(255, 255, 255, 0.9);
	line-height: 1.5;
	word-wrap: break-word;
	white-space: pre-wrap;
}

.text img {
	height: 1.5em;
	vertical-align: middle;
	margin: 0 2px;
}

/* ── Glow Effect (behind card) ──────────────────────────────────────────── */
.glow {
	position: absolute;
	inset: -2px;
	background: linear-gradient(135deg, var(--neonpink), var(--neonblue));
	border-radius: 18px;
	opacity: 0;
	z-index: -1;
	filter: blur(16px);
	transition: opacity 0.4s ease;
}

.message.is-new .glow {
	opacity: 0.4;
	animation: glowFade 2s ease-out forwards;
}

/* ═══════════════════════════════════════════════════════════════════════════
   Role-specific Styles
   ═══════════════════════════════════════════════════════════════════════════ */

/* ── VIP ────────────────────────────────────────────────────────────────── */
.vip .message-inner {
	border-color: rgba(201, 168, 76, 0.3);
	background:
		linear-gradient(
			135deg,
			rgba(17, 14, 26, 0.95) 0%,
			rgba(30, 26, 20, 0.95) 40%,
			rgba(50, 44, 28, 0.9) 50%,
			rgba(30, 26, 20, 0.95) 60%,
			rgba(17, 14, 26, 0.95) 100%
		);
	background-size: 400% 400%;
	animation: modShine 6s ease-in-out infinite;
}

.vip .message-inner::before {
	background: linear-gradient(180deg, #c9a84c, #f5e6a3);
	opacity: 1;
}

.vip .username {
	background: linear-gradient(90deg, #c9a84c, #f5e6a3);
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}

.vip .avatar-ring {
	background: conic-gradient(#c9a84c, #f5e6a3, #c9a84c, #f5e6a3, #c9a84c);
	animation: ringRotate 6s linear infinite;
}

/* VIP avatar stays still — only the ring border rotates */
.vip .avatar {
	animation: ringRotateReverse 6s linear infinite;
}

.vip .glow {
	background: #c9a84c;
}

/* ── Subscriber (normal viewer + sub) ──────────────────────────────────── */
.sub-sheen .message-inner {
	background:
		linear-gradient(
			135deg,
			rgba(17, 14, 26, 0.95) 0%,
			rgba(26, 20, 38, 0.95) 40%,
			rgba(42, 30, 58, 0.9) 50%,
			rgba(26, 20, 38, 0.95) 60%,
			rgba(17, 14, 26, 0.95) 100%
		);
	background-size: 400% 400%;
	animation: modShine 6s ease-in-out infinite;
}

.sub-sheen .username {
	-webkit-text-fill-color: #d4c8e8;
}

/* ── Mod ────────────────────────────────────────────────────────────────── */
.mod .message-inner {
	border-color: rgba(100, 120, 150, 0.25);
	background:
		linear-gradient(
			135deg,
			rgba(16, 24, 40, 0.95) 0%,
			rgba(26, 38, 62, 0.95) 40%,
			rgba(34, 52, 88, 0.9) 50%,
			rgba(26, 38, 62, 0.95) 60%,
			rgba(16, 24, 40, 0.95) 100%
		);
	background-size: 400% 400%;
	animation: modShine 6s ease-in-out infinite;
}

.mod .message-inner::before {
	background: linear-gradient(180deg, var(--gray), var(--lightgray));
	opacity: 0.8;
}

.mod .username {
	background: none;
	-webkit-text-fill-color: #c8d6e8;
}

.mod .avatar-ring {
	background: conic-gradient(var(--gray), var(--white), var(--gray), var(--white), var(--gray));
	animation: ringRotate 6s linear infinite;
}

.mod .glow {
	background: linear-gradient(135deg, rgba(34, 52, 88, 0.8), rgba(100, 120, 150, 0.6));
}

/* ── Highlighted ────────────────────────────────────────────────────────── */
.highlighted .message-inner {
	border: none;
	padding: 16px 18px;
	background: var(--darkblue);
	overflow: visible;
}

/* Spinning gradient that peeks out as the border */
.highlighted .message-inner::after {
	content: '';
	position: absolute;
	inset: -3px;
	border-radius: 18px;
	background: repeating-conic-gradient(
		from var(--angle),
		var(--neonpink) 0%, var(--neonblue) 50%, var(--neonpink) 100%
	);
	animation: rotate 10s linear infinite;
	z-index: -2;
}

/* Solid fill covers the gradient in the card interior */
.highlighted .message-inner::before {
	width: auto;
	height: auto;
	inset: 0;
	border-radius: 16px;
	background: var(--darkblue);
	opacity: 1;
	animation: none;
	z-index: -1;
}

.highlighted .message-inner > * {
	position: relative;
	z-index: 1;
}

.highlighted .username {
	background: none;
	-webkit-text-fill-color: var(--white);
}

.highlighted .text {
	color: rgba(255, 255, 255, 0.9);
}

.highlighted .glow {
	opacity: 0.6 !important;
	animation: none;
}

.highlighted .avatar-ring {
	background: conic-gradient(var(--neonpink), var(--neonblue), var(--neonpink), var(--neonblue), var(--neonpink));
	animation: ringRotate 6s linear infinite;
}

.highlighted .avatar {
	animation: ringRotateReverse 6s linear infinite;
}

/* ═══════════════════════════════════════════════════════════════════════════
   Fade State (when highlight is active)
   ═══════════════════════════════════════════════════════════════════════════ */
.fade .message:not(.highlighted) {
	opacity: 0.5;
	transform: scale(0.98);
	filter: brightness(0.7);
}

/* ═══════════════════════════════════════════════════════════════════════════
   Party Mode Bounces
   ═══════════════════════════════════════════════════════════════════════════ */
.bounce-1 {
	animation: bounce1 0.6s ease-in-out infinite alternate;
}
.bounce-2 {
	animation: bounce2 0.5s ease-in-out infinite alternate;
}
.bounce-3 {
	animation: bounce3 0.7s ease-in-out infinite alternate;
}

/* ═══════════════════════════════════════════════════════════════════════════
   Transition Group Animations
   ═══════════════════════════════════════════════════════════════════════════ */
.msg-move {
	transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.msg-leave-active {
	position: absolute;
	width: 100%;
}

/* ═══════════════════════════════════════════════════════════════════════════
   Keyframe Animations
   ═══════════════════════════════════════════════════════════════════════════ */

@keyframes slideIn {
	0% {
		opacity: 0;
		transform: translateX(60px) scale(0.95);
	}
	100% {
		opacity: 1;
		transform: translateX(0) scale(1);
	}
}

@keyframes slideOut {
	0% {
		opacity: 1;
		transform: translateX(0) scale(1);
	}
	100% {
		opacity: 0;
		transform: translateX(40px) scale(0.9);
	}
}

@keyframes glowFade {
	0% {
		opacity: 0.5;
	}
	100% {
		opacity: 0;
	}
}

@keyframes ringPulse {
	0%, 100% {
		box-shadow: 0 0 0 0 rgba(0, 255, 255, 0.3);
	}
	50% {
		box-shadow: 0 0 8px 2px rgba(255, 0, 255, 0.2);
	}
}

@keyframes ringRotate {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

@keyframes ringRotateReverse {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(-360deg);
	}
}

@keyframes borderOrbit {
	0% {
		background-position: 0% 0%;
	}
	100% {
		background-position: 0% 400%;
	}
}

@keyframes shimmer {
	0% {
		background-position: 200% 0;
	}
	100% {
		background-position: -200% 0;
	}
}

@keyframes modShine {
	0% {
		background-position: 0% 0%;
	}
	50% {
		background-position: 100% 100%;
	}
	100% {
		background-position: 0% 0%;
	}
}

@keyframes bounce1 {
	0% { transform: translateY(0) rotate(-2deg); }
	100% { transform: translateY(-8px) rotate(2deg); }
}

@keyframes bounce2 {
	0% { transform: translateY(0) rotate(1deg); }
	100% { transform: translateY(-6px) rotate(-3deg); }
}

@keyframes bounce3 {
	0% { transform: translateY(0) rotate(-1deg); }
	100% { transform: translateY(-10px) rotate(1deg); }
}

@property --angle {
	syntax: '<angle>';
	initial-value: 0deg;
	inherits: false;
}

@keyframes rotate {
	to {
		--angle: 360deg;
	}
}
